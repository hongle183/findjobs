<!-- Theme included stylesheets -->
<link rel="stylesheet" href="//cdn.quilljs.com/1.3.6/quill.snow.css" />
<main>
    <div class="container" style="margin-top: 20px; margin-bottom: 40px;">
        <div class="row">
            <div class="col-lg-4">
                <div class="profile-card-4">
                    <div class="card z-depth-3">
                        <div class="card-body card-user text-center">
                            <div class="profile-pic">
                                <label class="-label" for="file">
                                    <i class="fa-solid fa-camera"></i>
                                </label>
                                <form id="avatar-form" action="/user/profile/upload-avatar" method="post"
                                    enctype="multipart/form-data">
                                    <input id="file" name="avatar" type="file" accept="image/*"
                                        onchange="loadFile(event); submitForm();" />
                                </form>
                                <img src="{{user.img}}" id="output" />
                            </div>
                            <h5 class="mb-1 text-white">Hồng Lê</h5>
                            <h6 class="text-light">{{user_info.position}}</h6>
                        </div>
                        <div class="card-body">
                            <div class="text-left">
                                <p class="mb-2">
                                    <strong>Họ tên: </strong> <span class="m-l-15">{{user.name}}</span>
                                </p>
                                <p class="mb-2">
                                    <strong>SĐT: </strong><span class="m-l-15">{{user_info.phone}}</span>
                                </p>
                                <p class="mb-2">
                                    <strong>Email: </strong>
                                    <span class="m-l-15">{{user.email}}</span>
                                </p>
                                <p class="mb-2">
                                    <strong>Địa chỉ: </strong><span class="m-l-15">{{user_info.address}}</span>
                                </p>
                            </div>
                            {{!-- <div class="row text-center mt-4">
                                <div class="col p-2">
                                    <h4 class="mb-1 line-height-5">154</h4>
                                    <small class="mb-0 font-weight-bold">Projects</small>
                                </div>
                                <div class="col p-2">
                                    <h4 class="mb-1 line-height-5">2.2k</h4>
                                    <small class="mb-0 font-weight-bold">Followers</small>
                                </div>
                                <div class="col p-2">
                                    <h4 class="mb-1 line-height-5">9.1k</h4>
                                    <small class="mb-0 font-weight-bold">Views</small>
                                </div>
                            </div> --}}
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-8">
                <div class="card z-depth-3">
                    <div class="card-body">
                        <ul class="nav nav-pills nav-pills-primary nav-justified">
                            <li class="nav-item">
                                <a href="javascript:void();" data-target="#profile" data-toggle="pill"
                                    class="nav-link active show"><i class="icon-user"></i> <span
                                        class="hidden-xs">Profile</span></a>
                            </li>
                            {{!-- <li class="nav-item">
                                <a href="javascript:void();" data-target="#messages" data-toggle="pill"
                                    class="nav-link"><i class="icon-envelope-open"></i> <span
                                        class="hidden-xs">Messages</span></a>
                            </li> --}}
                            <li class="nav-item">
                                <a href="javascript:void();" data-target="#edit" data-toggle="pill" class="nav-link"><i
                                        class="icon-note"></i> <span class="hidden-xs">Edit</span></a>
                            </li>
                        </ul>
                        <div class="tab-content p-3">
                            <div class="tab-pane active show" id="profile">
                                <h5 class="mb-3">User Profile</h5>
                                <div class="row">
                                    <div class="col-md-12">
                                        <h6>Giới thiệu</h6>
                                        <div id="intro"></div>
                                    </div>
                                    {{!-- <div class="col-md-6">
                                        <h6>Kĩ năng</h6>
                                        <a href="javascript:void();" class="badge badge-dark badge-pill">html5</a>
                                        <a href="javascript:void();" class="badge badge-dark badge-pill">react</a>
                                        <a href="javascript:void();" class="badge badge-dark badge-pill">codeply</a>
                                        <a href="javascript:void();" class="badge badge-dark badge-pill">angularjs</a>
                                        <a href="javascript:void();" class="badge badge-dark badge-pill">css3</a>
                                        <a href="javascript:void();" class="badge badge-dark badge-pill">jquery</a>
                                        <a href="javascript:void();" class="badge badge-dark badge-pill">bootstrap</a>
                                        <a href="javascript:void();"
                                            class="badge badge-dark badge-pill">responsive-design</a>
                                    </div>
                                    <div class="col-md-12">
                                        <h5 class="mt-2 mb-3">
                                            <span class="fa fa-clock-o ion-clock float-right"></span> Recent
                                            Activity
                                        </h5>
                                        <div id="standalone-container">
                                            <div id="toolbar-container">
                                                <select class="ql-font"></select>
                                                <select class="ql-size"></select>
                                                <button class="ql-bold"></button>
                                                <button class="ql-italic"></button>
                                                <button class="ql-underline"></button>
                                                <select class="ql-color"></select>
                                                <button class="ql-script" value="sub"></button>
                                                <button class="ql-script" value="super"></button>
                                                <button class="ql-header" value="1"></button>
                                                <button class="ql-header" value="2"></button>
                                                <button class="ql-blockquote"></button>
                                                <button class="ql-code-block"></button>
                                                <button class="ql-list" value="ordered"></button>
                                                <button class="ql-list" value="bullet"></button>
                                                <button class="ql-link"></button>
                                                <button class="ql-image"></button>
                                            </div>
                                            <div id="editor-container"></div>
                                            <form action="">
                                                <input type="hidden" id="content" name="content">
                                                <button class="btn" type="submit">Lưu thay đổi</button>
                                            </form>
                                        </div>
                                    </div> --}}
                                </div>
                            </div>
                            {{!-- <div class="tab-pane" id="messages">
                                <div class="alert alert-info alert-dismissible" role="alert">
                                    <button type="button" class="close" data-dismiss="alert">×</button>
                                    <div class="alert-icon">
                                        <i class="icon-info"></i>
                                    </div>
                                    <div class="alert-message">
                                        <span><strong>Info!</strong> Lorem Ipsum is simply dummy text.</span>
                                    </div>
                                </div>
                                <table class="table table-hover table-striped">
                                    <tbody>
                                        <tr>
                                            <td>
                                                <span class="float-right font-weight-bold">3 hrs ago</span> Here is
                                                your a link to the latest summary report from the..
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <span class="float-right font-weight-bold">Yesterday</span> There
                                                has been a request on your account since that was..
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <span class="float-right font-weight-bold">9/10</span> Porttitor
                                                vitae ultrices quis, dapibus id dolor. Morbi venenatis lacinia
                                                rhoncus.
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <span class="float-right font-weight-bold">9/4</span> Vestibulum
                                                tincidunt ullamcorper eros eget luctus.
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <span class="float-right font-weight-bold">9/4</span> Maxamillion
                                                ais the fix for tibulum tincidunt ullamcorper eros.
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div> --}}
                            <div class="tab-pane" id="edit">
                                <form id="profile-form" method="post" action="/user/profile/{{user._id}}">
                                    <div class="form-group row">
                                        <label for="name" class="col-lg-3 col-form-label form-control-label">Họ và tên
                                            <span class="text-danger">(⁕)</span></label>
                                        <div class="col-lg-9">
                                            <input id="name" name="name" rules="required" class="form-control"
                                                type="text" placeholder="Find Jobs" value="{{user.name}}" />
                                            <div class="invalid-feedback text-left"></div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="email" class="col-lg-3 col-form-label form-control-label">Email liên
                                            lạc
                                            <span class="text-danger">(⁕)</span></label>
                                        <div class="col-lg-9">
                                            <input id="email" name="email" rules="required email" class="form-control"
                                                type="text" placeholder="findjobs@gmail.com" value="{{user.email}}"
                                                readonly />
                                            <div class="invalid-feedback text-left"></div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-6">
                                            <div class="form-group row">
                                                <label class="col-lg-6 col-form-label form-control-label">Giới
                                                    tính <span class="text-danger">(⁕)</span></label>
                                                {{#if user_info.gender}}
                                                <div class="col-lg-6">
                                                    <div class="form-check form-check-inline">
                                                        <input class="form-check-input" type="radio" name="gender"
                                                            id="male" value="true" checked>
                                                        <label class="form-check-label" for="male">Nam</label>
                                                    </div>
                                                    <div class="form-check form-check-inline">
                                                        <input class="form-check-input" type="radio" name="gender"
                                                            id="female" value="false">
                                                        <label class="form-check-label" for="female">Nữ</label>
                                                    </div>
                                                </div>
                                                {{else}}
                                                <div class="col-lg-6">
                                                    <div class="form-check form-check-inline">
                                                        <input class="form-check-input" type="radio" name="gender"
                                                            id="male" value="true">
                                                        <label class="form-check-label" for="male">Nam</label>
                                                    </div>
                                                    <div class="form-check form-check-inline">
                                                        <input class="form-check-input" type="radio" name="gender"
                                                            id="female" value="false" checked>
                                                        <label class="form-check-label" for="female">Nữ</label>
                                                    </div>
                                                </div>
                                                {{/if}}
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="form-group row">
                                                <label for="phone" class="col-lg-6 col-form-label form-control-label">Số
                                                    điện thoại <span class="text-danger">(⁕)</span></label>
                                                <div class="col-lg-6">
                                                    <input id="phone" name="phone" rules="required" class="form-control"
                                                        type="text" placeholder="+84 338 681 682"
                                                        value="{{user_info.phone}}" />
                                                    <div class="invalid-feedback text-left"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="position" class="col-lg-3 col-form-label form-control-label">Vị trí
                                            <span class="text-danger">(⁕)</span></label>
                                        <div class="col-lg-9">
                                            <input id="position" name="position" rules="required" class="form-control"
                                                type="text" placeholder="Web Developer" value="{{user_info.position}}" />
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="web"
                                            class="col-lg-3 col-form-label form-control-label">Website</label>
                                        <div class="col-lg-9">
                                            <input id="web" name="web" class="form-control" type="url"
                                                placeholder="https://findjobs.com" value="{{user_info.website}}" />
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="address" class="col-lg-3 col-form-label form-control-label">Địa chỉ
                                            hiện tại
                                            <span class="text-danger">(⁕)</span></label>
                                        <div class="col-lg-9">
                                            <input id="address" name="address" rules="required" class="form-control"
                                                type="text" placeholder="19 Nguyễn Hữu Thọ, Tân Hưng, Quận 7, TP HCM"
                                                value="{{user_info.address}}" />
                                            <div class="invalid-feedback text-left"></div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="about" class="col-lg-3 col-form-label form-control-label">Giới thiệu
                                            bản thân</label>
                                        <div class="col-lg-9">
                                            <textarea id="about" name="about" class="form-control" rows="3"
                                                placeholder="Thêm mô tả bản thân để nhà tuyển dụng hiểu hơn về bạn">{{user_info.about}}</textarea>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-6">
                                            <div class="form-group row">
                                                <label for="password"
                                                    class="col-lg-6 col-form-label form-control-label">Mật
                                                    khẩu <span class="text-danger">(⁕)</span></label>
                                                <div class="col-lg-6">
                                                    <input id="password" name="password" rules="required min:6"
                                                        class="form-control" type="password" placeholder="••••••" />
                                                    <div class="invalid-feedback text-left"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="form-group row">
                                                <label for="new_password"
                                                    class="col-lg-6 col-form-label form-control-label">Mật
                                                    khẩu mới</label>
                                                <div class="col-lg-6">
                                                    <input id="new_password" name="new_password" rules="min:6"
                                                        class="form-control" type="password" placeholder="••••••" />
                                                    <div class="invalid-feedback text-left"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row justify-content-center">
                                        <button class="btn head-btn2 mr-2" type="reset">Hủy</button>
                                        <button class="btn head-btn1" type="submit">Cập nhật</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>
<script src="//cdn.quilljs.com/1.3.6/quill.min.js"></script>
<!-- Initialize Quill editor -->
<script>
    // avatar
    var loadFile = function (event) {
        const image = document.getElementById('output');
        image.src = URL.createObjectURL(event.target.files[0]);
    };

    var submitForm = function () {
        document.getElementById('avatar-form').submit();
    }

    // about
    const intro = document.getElementById('intro');
    const about = document.getElementById('about').value;
    var arr = about.split(/\r?\n/);

    for (let i = 0; i < arr.length; i++) {
        var small = document.createElement('small');
        small.innerHTML = arr[i];
        intro.append(small);
        intro.append(document.createElement('br'));
    }

    var quill = new Quill('#editor-container', {
        modules: {
            toolbar: '#toolbar-container'
        },
        placeholder: 'Compose an epic...',
        theme: 'snow'
    });

    // Lắng nghe sự kiện khi nội dung của trình soạn thảo thay đổi
    quill.on('text-change', function (delta, oldDelta, source) {
        $('#content').val(quill.getText());
    });
</script>
<script src="/js/validator.js"></script>
<script>
    var form = new Validator('#profile-form');
</script>